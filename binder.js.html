<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width" charset="utf-8">
    <title>milo</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/cayman.min.css">
    <link rel="stylesheet" href="css/prism.min.css">
    <link rel="stylesheet" href="css/index.min.css">
    <link rel="stylesheet" href="css/docs.min.css">
    <link rel="stylesheet" href="css/bootstrap-responsive.min.css">
  </head>
  <body data-spy="scroll" data-target=".scrollspy">
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container"><a class="brand">Mr. Doc</a>
          <div class="nav-collapse collapse">
            <ul class="nav pull-right sponsored"></ul>
          </div>
        </div>
      </div>
    </div>
    <header id="overview" class="jumbotron subhead">
      <div class="container">
        <h1>milo</h1>
        <p class="lead"></p>
      </div>
    </header>
    <div class="container">
      <div class="row">
        <div class="span3 bs-docs-sidebar">
          <ul class="nav nav-list bs-docs-sidenav affix-top">
            <li><a href="index.html">Main</a></li>
            <li><a href="abstract/facet.js.html">abstract/facet.js</a></li>
            <li><a href="abstract/faceted_object.js.html">abstract/faceted_object.js</a></li>
            <li><a href="abstract/registry.js.html">abstract/registry.js</a></li>
            <li><a href="attributes/a_bind.js.html">attributes/a_bind.js</a></li>
            <li><a href="attributes/a_class.js.html">attributes/a_class.js</a></li>
            <li><a href="attributes/a_load.js.html">attributes/a_load.js</a></li>
            <li><a href="attributes/index.js.html">attributes/index.js</a></li>
            <li class="active"><a href="binder.js.html">binder.js</a></li>
            <li><a href="classes.js.html">classes.js</a></li>
            <li><a href="command/actions_history.js.html">command/actions_history.js</a></li>
            <li><a href="command/cmd_registry.js.html">command/cmd_registry.js</a></li>
            <li><a href="command/index.js.html">command/index.js</a></li>
            <li><a href="command/transaction.js.html">command/transaction.js</a></li>
            <li><a href="command/transaction_history.js.html">command/transaction_history.js</a></li>
            <li><a href="components/ComponentTemplate.js.html">components/ComponentTemplate.js</a></li>
            <li><a href="components/c_class.js.html">components/c_class.js</a></li>
            <li><a href="components/c_facet.js.html">components/c_facet.js</a></li>
            <li><a href="components/c_facets/Container.js.html">components/c_facets/Container.js</a></li>
            <li><a href="components/c_facets/Css.js.html">components/c_facets/Css.js</a></li>
            <li><a href="components/c_facets/Data.js.html">components/c_facets/Data.js</a></li>
            <li><a href="components/c_facets/Dom.js.html">components/c_facets/Dom.js</a></li>
            <li><a href="components/c_facets/Drag.js.html">components/c_facets/Drag.js</a></li>
            <li><a href="components/c_facets/Drop.js.html">components/c_facets/Drop.js</a></li>
            <li><a href="components/c_facets/Events.js.html">components/c_facets/Events.js</a></li>
            <li><a href="components/c_facets/Frame.js.html">components/c_facets/Frame.js</a></li>
            <li><a href="components/c_facets/Item.js.html">components/c_facets/Item.js</a></li>
            <li><a href="components/c_facets/List.js.html">components/c_facets/List.js</a></li>
            <li><a href="components/c_facets/ModelFacet.js.html">components/c_facets/ModelFacet.js</a></li>
            <li><a href="components/c_facets/Options.js.html">components/c_facets/Options.js</a></li>
            <li><a href="components/c_facets/Template.js.html">components/c_facets/Template.js</a></li>
            <li><a href="components/c_facets/Transfer.js.html">components/c_facets/Transfer.js</a></li>
            <li><a href="components/c_facets/cf_registry.js.html">components/c_facets/cf_registry.js</a></li>
            <li><a href="components/c_info.js.html">components/c_info.js</a></li>
            <li><a href="components/c_registry.js.html">components/c_registry.js</a></li>
            <li><a href="components/c_utils.js.html">components/c_utils.js</a></li>
            <li><a href="components/classes/View.js.html">components/classes/View.js</a></li>
            <li><a href="components/msg_api/data.js.html">components/msg_api/data.js</a></li>
            <li><a href="components/msg_api/de_data.js.html">components/msg_api/de_data.js</a></li>
            <li><a href="components/msg_api/drop.js.html">components/msg_api/drop.js</a></li>
            <li><a href="components/msg_src/dom_events.js.html">components/msg_src/dom_events.js</a></li>
            <li><a href="components/msg_src/frame.js.html">components/msg_src/frame.js</a></li>
            <li><a href="components/scope.js.html">components/scope.js</a></li>
            <li><a href="config.js.html">config.js</a></li>
            <li><a href="loader.js.html">loader.js</a></li>
            <li><a href="milo.js.html">milo.js</a></li>
            <li><a href="registry.js.html">registry.js</a></li>
            <li><a href="services/de_constrs.js.html">services/de_constrs.js</a></li>
            <li><a href="services/dom_source.js.html">services/dom_source.js</a></li>
            <li><a href="services/mail/index.js.html">services/mail/index.js</a></li>
            <li><a href="services/mail/mail_api.js.html">services/mail/mail_api.js</a></li>
            <li><a href="services/mail/mail_source.js.html">services/mail/mail_source.js</a></li>
            <li><a href="services/window.js.html">services/window.js</a></li>
            <li><a href="use_components.js.html">use_components.js</a></li>
            <li><a href="use_facets.js.html">use_facets.js</a></li>
            <li><a href="util/component_name.js.html">util/component_name.js</a></li>
            <li><a href="util/create_component_class.js.html">util/create_component_class.js</a></li>
            <li><a href="util/create_facet_class.js.html">util/create_facet_class.js</a></li>
            <li><a href="util/deprecate.js.html">util/deprecate.js</a></li>
            <li><a href="util/dom.js.html">util/dom.js</a></li>
            <li><a href="util/dom_listeners.js.html">util/dom_listeners.js</a></li>
            <li><a href="util/domready.js.html">util/domready.js</a></li>
            <li><a href="util/dragdrop.js.html">util/dragdrop.js</a></li>
            <li><a href="util/error.js.html">util/error.js</a></li>
            <li><a href="util/fragment.js.html">util/fragment.js</a></li>
            <li><a href="util/index.js.html">util/index.js</a></li>
            <li><a href="util/json_parse.js.html">util/json_parse.js</a></li>
            <li><a href="util/request.js.html">util/request.js</a></li>
            <li><a href="util/selection/index.js.html">util/selection/index.js</a></li>
            <li><a href="util/storage/index.js.html">util/storage/index.js</a></li>
            <li><a href="util/storage/model.js.html">util/storage/model.js</a></li>
            <li><a href="util/storage/msg_src.js.html">util/storage/msg_src.js</a></li>
            <li><a href="util/unique_id.js.html">util/unique_id.js</a></li>
            <li><a href="util/websocket/index.js.html">util/websocket/index.js</a></li>
            <li><a href="util/websocket/msg_api.js.html">util/websocket/msg_api.js</a></li>
            <li><a href="util/websocket/msg_src.js.html">util/websocket/msg_src.js</a></li>
          </ul>
          <div class="scrollspy">
            <ul class="nav nav-list bs-docs-sidenav affix-top">
              <li><a href="#binder"><i class="alert alert-info"></i><span>binder</span></a>
              </li>
              <li><a href="#createBinderScope"><i class="alert alert-info"></i><span>createBinderScope</span></a>
              </li>
            </ul>
          </div>
        </div>
        <div class="span9">
          <section id="binder">
            <h1>binder</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">function</div><span>&nbsp;</span><span>binder()</span><span>&nbsp;</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>scopeEl</td>
                <td>Element</td>
                <td><p>root element inside which DOM will be scanned and bound</p></td>
              </tr>
              <tr>
                <td>rootScope</td>
                <td>Scope</td>
                <td><p>Optional Root scope object where top level components will be saved.</p></td>
              </tr>
              <tr>
                <td>bindRootElement</td>
                <td>Boolean</td>
                <td><p>If set to false, then the root element will not be bound. True by default.</p></td>
              </tr>
              <tr>
                <td>throwOnErrors</td>
                <td>Boolean</td>
                <td><p>If set to false, then errors will only be logged to console. True by default.</p></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Scope</td>
                <td></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p><code>milo.binder</code></p><p>Recursively scans the document tree inside <code>scopeEl</code> (document.body by default) looking for <strong>ml-bind</strong> attribute that should contain the class, additional facets and the name of the component that should be created and bound to the element.</p><p>Possible values of <strong>ml-bind</strong> attribute:</p><ul>
<li><code>:myView</code> - only component name. An instance of Component class will be created without any facets.</li>
<li><code>View:myView</code> - class and component name. An instance of View class will be created.</li>
<li><code>[Events, Data]:myView</code> - facets and component name. An instance of Component class will be created with the addition of facets Events and Data.</li>
<li><code>View[Events, Data]:myView</code> - class, facet(s) and component name. An instance of View class will be created with the addition of facets Events and Data.</li>
</ul>
<p>Function returns an instance of <a href="./components/scope.js.html"><code>Scope</code></a> class containing all components created as a result of scanning DOM.</p><p>If the component has <a href="./components/c_facets/Container.js"><code>Container</code></a> facet, children of this element will be stored in the <code>scope</code> object, available as scope property on the Container facet of this component. Names of components within the scope should be unique, but they can be the same as the names of components in outer scope (or some other scope).</p></div>
          <pre><code class="language-javascript">function binder(scopeEl, rootScope, bindRootElement, throwOnErrors) {
    return createBinderScope(scopeEl, function(scope, el, attr, throwOnErrors) {
        var info = new ComponentInfo(scope, el, attr, throwOnErrors);
        return Component.create(info, throwOnErrors);
    }, rootScope, bindRootElement, throwOnErrors);
}


// bind in two passes
function twoPass(scopeEl, rootScope, bindRootElement, throwOnErrors) {
    var scanScope = binder.scan(scopeEl, rootScope, bindRootElement, throwOnErrors);
    return binder.create(scanScope, undefined, throwOnErrors);
}


// scan DOM for BindAttribute
function scan(scopeEl, rootScope, bindRootElement, throwOnErrors) {
    return createBinderScope(scopeEl, function(scope, el, attr, throwOnErrors) {
        return new ComponentInfo(scope, el, attr, throwOnErrors);
    }, rootScope, bindRootElement, throwOnErrors);
}


// create bound components
function create(scanScope, hostObject, throwOnErrors) {
    var scope = new Scope(scanScope._rootEl, hostObject)
        , addMethod = throwOnErrors === false ? '_safeAdd' : '_add';

    scanScope._each(function(compInfo) {
        // set correct component's scope
        var info = _.clone(compInfo);
        info.scope = scope;

        // create component
        var aComponent = Component.create(info, throwOnErrors);

        scope[addMethod](aComponent, aComponent.name);
        if (aComponent.container)
            aComponent.container.scope = create(compInfo.container.scope, aComponent.container, throwOnErrors);
    });

    return scope;
}</code></pre>
          <section id="createBinderScope">
            <h1>createBinderScope</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">function</div><span>&nbsp;</span><span>createBinderScope()</span><span>&nbsp;</span>
            </p>
          </section>
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>scopeEl</td>
                <td>Element</td>
                <td><p>scopeEl root element inside which DOM will be scanned and bound (document.body by default).</p></td>
              </tr>
              <tr>
                <td>scopeObjectFactory</td>
                <td>Function</td>
                <td><p>See <a href="#milo.binder">binder</a></p></td>
              </tr>
              <tr>
                <td>rootScope</td>
                <td>Scope</td>
                <td><p>Optional Root scope object where top level components will be saved.</p></td>
              </tr>
              <tr>
                <td>bindRootElement</td>
                <td>Boolean</td>
                <td><p>If set to false, then the root element will not be bound. True by default.</p></td>
              </tr>
              <tr>
                <td>throwOnErrors</td>
                <td>Boolean</td>
                <td><p>If set to false, then errors will only be logged to console. True by default.</p></td>
              </tr>
              <tr>
                <td>return</td>
                <td>Scope</td>
                <td><p>[description]</p></td>
              </tr>
            </tbody>
          </table>
          <div class="description"><p><code>createBinderScope</code></p></div>
          <pre><code class="language-javascript">function createBinderScope(scopeEl, scopeObjectFactory, rootScope, bindRootElement, throwOnErrors) {
    scopeEl = scopeEl || document.body;
    var scope = rootScope || new Scope(scopeEl)
        , addMethod = throwOnErrors === false ? '_safeAdd' : '_add';

    createScopeForElement(scope, scopeEl, bindRootElement);

    return scope;


    function createScopeForElement(scope, el, bindRootElement) {
        // get element's binding attribute (ml-bind by default)
        var attr = new BindAttribute(el);

        // if element has bind attribute crate scope object (Component or ComponentInfo)
        if (attr.node &amp;&amp; bindRootElement !== false) {
            var scopedObject = scopeObjectFactory(scope, el, attr, throwOnErrors)
                , isContainer = typeof scopedObject != 'undefined' &amp;&amp; scopedObject.container;
        }

        // if there are childNodes add children to new scope if this element has component with Container facet
        // otherwise create a new scope
        if (el.childNodes &amp;&amp; el.childNodes.length) {
            if (isContainer) {
                var innerScope = new Scope(el);
                scopedObject.container.scope = innerScope;
                innerScope._hostObject = scopedObject.container;
            }

            createScopeForChildren(el, isContainer ? innerScope : scope);
        }

        // if scope wasn't previously created on container facet, create empty scope anyway
        if (isContainer &amp;&amp; ! scopedObject.container.scope)
            scopedObject.container.scope = new Scope(el);


        // TODO condition after &amp;&amp; is a hack, should not be used!
        if (scopedObject) // &amp;&amp; ! scope[attr.compName])
            scope[addMethod](scopedObject, attr.compName);

        // _.defer(postChildrenBoundMessage, el);
        postChildrenBoundMessage(el);

        return scopedObject;


        function postChildrenBoundMessage(el) {
            var elComp = Component.getComponent(el);

            if (elComp)
                elComp.postMessageSync('childrenbound');
        }
    }


    function createScopeForChildren(containerEl, scope) {
        var children = utilDom.children(containerEl);

        _.forEach(children, function(node) {
            createScopeForElement(scope, node, true);
        });
        return scope;
    }
}</code></pre>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container">
        <p>Documentation generated with <a href="https://github.com/mr-doc/mr-doc">Mr. Doc </a> created by <a href="https://twitter.com/FGRibreau" data-show-count="false" class="twitter-follow-button">Francois-Guillaume Ribreau </a></p>
        <p>Mr. Doc is sponsored by <a href="http://bringr.net/?btt" title="Outil d'analyse des réseaux sociaux" class="bringr">Bringr </a> and <a href="https://redsmin.com/?btt" title="Full Redis GUI" class="redsmin">Redsmin</a></p>
        <p>Theme borrowed from Twitter Bootstrap</p>
      </div>
    </footer>
    <script src="js/twitter-widget.min.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap-transition.min.js"></script>
    <script src="js/bootstrap-scrollspy.min.js"></script>
    <script src="js/bootstrap-dropdown.min.js"></script>
    <script src="js/bootstrap-collapse.min.js"></script>
    <script src="js/bootstrap-affix.min.js"></script>
    <script src="js/prism.min.js"></script>
    <script src="js/index.min.js"></script>
  </body>
</html>